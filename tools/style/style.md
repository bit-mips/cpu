# 代码规范

## 代码的对齐和缩进

使用Tab进行缩进，即对于不同的层次需要不同数量的Tab

使用空格进行对齐，即对于不同行之间的注释之类的代码让其出现在同一位置

## module的定义

### module名称

一个文件中仅能定义一个`module`，其命名规则需要以`CPU_RegFile`，其中下划线前代表该文件从属的大模块，下划线后为描述性的名称，单词首字母大写

### module接口定义

每个接口占一行，包括输入输出属性和类型等属性，并且对齐，接口名字需要使用描述性名称，均为小写，以下划线分隔单词

## 运算符的使用

### 单目运算符
与操作数间没有间隔

### 双目运算符、三目运算符
与前后操作数间为一个间隔

## 括号的使用
括号紧跟离其最近的内部单词，无需间隔

## `begin` `end`的用法
`begin`和前一语句在一行，间隔一个空格，`end`单独在一行

## 不允许在代码中出现的语句要点

任何寄存器初始值为`x`。

代码语句中不能加时间延迟，不允许出现如下语句: `#4 out <= cin`。

不允许使用门控时钟和门控复位。

不允许使用锁存器。

不允许在可综合的设计代码中使用```Define``来定义参数，应该使用参数`parameter`来定义。

不允许使用UDP(用户定义的原语元件)。

不允许在可综合代码中出现逻辑反馈环路，否则会生成不可预知的逻辑电路。

不允许在可综合模块中使用case，casez语句，只允许使用case和if-else语句作条件分支语句。

在时序逻辑的设计中不允许用阻塞赋值=，只允许用非阻塞赋值<=。

使用assign语句设计组合逻辑。

## 建议尽量采用的要点

尽量维护一个`always`块长度在50行以内。

用高电平有效的硬件异步复位reset。

用高电平有效的同步软件复位reset。

尽可能使用高电平有效信号，不使用低电平有效信号(除某些总线、器件有特殊要求外)。只有复位信号reset在特定情况下可以设置为低电平有效信号。

模块之间数据交换总线应该尽量用多路器实现。尽量不使用三态总线。三态总线只用于对外接口或者顶层内部总线。

模块中的每个输出信号原则上必须通过寄存器输出。任何不通过寄存器输出的信号必须加以注释，注意防止出现反馈回路。

适当拆分源代码，使其简洁明了可维护。

使用参数(`parameter`)作为可变化的常数，例如总线的位宽。

使用`localparam`定义常量。
